## Tạo và Triển khai Giao diện ICategoryRepository

### Giới thiệu
- Phần này tập trung vào việc tạo giao diện `ICategoryRepository` để mở rộng giao diện generic `IRepository` cho đối tượng cụ thể là **Category**.
- Giao diện `ICategoryRepository` sẽ kế thừa từ `IRepository<Category>` để tái sử dụng các phương thức CRUD cơ bản, đồng thời bổ sung các phương thức đặc thù như `Update` và `Save`.

### Tạo giao diện ICategoryRepository
- **Vị trí**: Đặt trong thư mục **Repository** của dự án **Data**.
- **Tên giao diện**: `ICategoryRepository`.
- **Kế thừa**: Kế thừa từ `IRepository<Category>` để áp dụng các phương thức CRUD generic cho đối tượng **Category**.
- **Mục đích**:
  - Tái sử dụng các phương thức cơ bản (`GetAll`, `GetFirstOrDefault`, `Add`, `Remove`, `RemoveRange`) từ `IRepository`.
  - Bổ sung các phương thức đặc thù như `Update` và `Save` cho **Category**.

#### Cấu trúc giao diện
- **Phương thức bổ sung**:
  - `Update`: Cập nhật thông tin của một đối tượng **Category**.
  - `Save`: Lưu các thay đổi vào cơ sở dữ liệu.
- **Cú pháp khai báo**:
  ```csharp
  public interface ICategoryRepository : IRepository<Category>
  {
      void Update(Category obj);
      void Save();
  }
  ```

### Chi tiết các phương thức bổ sung
#### 1. Update
- **Mô tả**: Cập nhật thông tin của một đối tượng **Category** trong cơ sở dữ liệu.
- **Tham số**: Đối tượng `Category` (được gọi là `obj`).
- **Kiểu trả về**: `void`.
- **Cú pháp**:
  ```csharp
  void Update(Category obj);
  ```

#### 2. Save
- **Mô tả**: Lưu tất cả các thay đổi (bao gồm thêm, xóa, cập nhật) vào cơ sở dữ liệu bằng cách gọi `SaveChanges` của EF Core.
- **Kiểu trả về**: `void`.
- **Cú pháp**:
  ```csharp
  void Save();
  ```

### Lý do bổ sung Update và Save
- **Update**:
  - Không được đưa vào giao diện generic `IRepository` vì logic cập nhật có thể khác nhau giữa các đối tượng (ví dụ: **Category** và **Product** có các thuộc tính cần cập nhật khác nhau).
  - Được định nghĩa trong `ICategoryRepository` để xử lý logic cập nhật đặc thù cho **Category**.
- **Save**:
  - Phương thức `SaveChanges` của EF Core được gọi để xác nhận các thay đổi trong cơ sở dữ liệu.
  - Đưa vào `ICategoryRepository` để kiểm soát việc lưu thay đổi một cách rõ ràng.

### Mã nguồn giao diện ICategoryRepository
```csharp
using Bulky.DataAccess.Data;
using Bulky.DataAccess.Repository.IRepository;

namespace Bulky.DataAccess.Repository
{
    public interface ICategoryRepository : IRepository<Category>
    {
        void Update(Category obj);
        void Save();
    }
}
```

### Ghi chú thêm
- **Kế thừa từ IRepository**:
  - `ICategoryRepository` kế thừa tất cả các phương thức của `IRepository<Category>`, bao gồm `GetAll`, `GetFirstOrDefault`, `Add`, `Remove`, và `RemoveRange`.
  - Điều này đảm bảo `ICategoryRepository` có đầy đủ các phương thức CRUD cơ bản mà không cần định nghĩa lại.
- **Tính đặc thù**:
  - Các phương thức `Update` và `Save` được thêm vào để đáp ứng yêu cầu cụ thể của **Category**, chẳng hạn như cập nhật các thuộc tính như `Name` hoặc `DisplayOrder`.
- **Triển khai tiếp theo**:
  - Giao diện `ICategoryRepository` sẽ được triển khai trong một lớp cụ thể (như `CategoryRepository`) để cung cấp logic thực thi cho các phương thức.
- **Liên kết nội bộ**:
  - Xem [[IRepository]] để hiểu về giao diện generic và các phương thức CRUD cơ bản.
  - Tham khảo [[Entity Framework Core]] để tìm hiểu về `SaveChanges` và các thao tác với cơ sở dữ liệu.
  - Xem [[CategoryRepository]] để biết cách triển khai giao diện này trong lớp cụ thể.

### Kết luận
- Giao diện `ICategoryRepository` mở rộng `IRepository<Category>` để cung cấp các phương thức cơ bản và bổ sung các phương thức đặc thù (`Update`, `Save`) cho **Category**.
- Phần tiếp theo sẽ trình bày cách triển khai giao diện này trong lớp `CategoryRepository`.