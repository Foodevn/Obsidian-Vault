## Thực hiện Chức năng CRUD với Razor Pages: Tạo Trang Danh sách Danh mục

### Mục tiêu
- Tái hiện chức năng quản lý danh mục (Categories) từ dự án MVC trong dự án Razor Pages.
- Tạo một trang Razor để hiển thị danh sách danh mục.
- Hiểu cách định tuyến (routing) trong Razor Pages và sự khác biệt so với MVC.

### Tổ chức cấu trúc thư mục
- **Trong dự án MVC**:
  - Chức năng quản lý danh mục được thực hiện thông qua *Controller* (ví dụ: `CategoriesController`), *View* và *Model*.
- **Trong dự án Razor Pages**:
  - Không sử dụng *Controller* hay *View*. Thay vào đó, sử dụng các trang Razor trong thư mục `Pages`.
  - Mỗi trang Razor bao gồm tệp `.cshtml` (giao diện) và tệp `.cs` (Page Model, chứa logic xử lý).

### Tạo trang Razor cho danh sách danh mục
1. **Tạo thư mục `Categories`**:
   - Trong thư mục `Pages`, tạo một thư mục mới có tên `Categories` để tổ chức các trang liên quan đến danh mục.
   - **Lưu ý**: Đặt tên thư mục là `Categories` (số nhiều) để tránh xung đột với tên lớp `Category` trong thư mục `Models`. Điều này giúp giảm việc phải khai báo `using` nhiều lần.

2. **Thêm trang Razor `Index.cshtml`**:
   - Nhấp chuột phải vào thư mục `Categories`, chọn **Add > Razor Page**.
   - Chọn **Razor Page - Empty** và đặt tên là `Index.cshtml`.
   - Kết quả:
     - Tạo tệp `Index.cshtml` (giao diện).
     - Tạo tệp `Index.cshtml.cs` (Page Model, chứa logic xử lý).

3. **Nội dung tệp `Index.cshtml`**:
   - Tệp này chứa giao diện của trang, sử dụng cú pháp Razor.
   - Chỉ thị `@page` xác định đây là một trang Razor.
   - Chỉ thị `@model` liên kết với Page Model (`IndexModel` trong `Index.cshtml.cs`).
   - Ví dụ nội dung cơ bản:
     ```cshtml
     @page
     @model BulkyWeb_Razor_Temp.Pages.Categories.IndexModel
     <h1>Danh sách Danh mục</h1>
     ```
   - **Giải thích**:
     - `@page`: Xác định tệp là một trang Razor.
     - `@model`: Liên kết với lớp `IndexModel` trong tệp `Index.cshtml.cs`.
     - `<h1>`: Hiển thị tiêu đề "Danh sách Danh mục".

4. **Nội dung tệp `Index.cshtml.cs`**:
   - Tệp này là Page Model, kế thừa từ lớp `PageModel`.
   - Chứa các phương thức xử lý như `OnGet`, `OnPost` (tương tự *Action* trong MVC).
   - Ví dụ nội dung mặc định:
     ```csharp
     namespace BulkyWeb_Razor_Temp.Pages.Categories
     {
         public class IndexModel : PageModel
         {
             public void OnGet()
             {
             }
         }
     }
     ```
   - **Lưu ý**: Tệp này được tạo tự động khi thêm trang Razor, khác với MVC nơi cần tự định nghĩa *Controller* và *View*.

### Định tuyến trong Razor Pages
- **Cơ chế định tuyến**:
  - Định tuyến dựa trên cấu trúc thư mục trong `Pages`.
  - Đường dẫn URL tương ứng với vị trí tệp `.cshtml` trong thư mục `Pages`.
  - Ví dụ: Trang `Pages/Categories/Index.cshtml` có URL là `/Categories` hoặc `/Categories/Index`.
    - `Index` là tùy chọn, có thể bỏ qua trong URL.
- **So sánh với MVC**:
  - **MVC**: Định tuyến dựa trên *Controller* và *Action* (ví dụ: `/Categories/Index` yêu cầu định nghĩa trong *Controller* và các tham số định tuyến).
  - **Razor Pages**: Định tuyến đơn giản hơn, không cần *Controller* hay tham số định tuyến phức tạp.

### Chạy và kiểm tra
1. **Đặt dự án Razor Pages làm Startup Project**:
   - Trong Visual Studio, nhấp chuột phải vào dự án `BulkyWeb_Razor_Temp` và chọn **Set as Startup Project**.
2. **Chạy dự án**:
   - Truy cập URL `/Categories` hoặc `/Categories/Index`.
   - Kết quả: Hiển thị trang với tiêu đề "Danh sách Danh mục".
3. **Kiểm tra định tuyến**:
   - URL `/Categories` tự động tải trang `Index.cshtml` trong thư mục `Categories`.
   - Không cần cấu hình định tuyến phức tạp như trong MVC.

### Ghi chú thêm
- Razor Pages đơn giản hóa việc phát triển bằng cách tích hợp logic và giao diện trong cùng một trang, phù hợp với các ứng dụng web nhỏ hoặc trung bình.
- Để tiếp tục triển khai các chức năng CRUD (tạo, đọc, cập nhật, xóa), tham khảo video tiếp theo: [[Thực hiện CRUD trong Razor Pages]].
- Nếu cần sử dụng cùng tên `Category` cho thư mục, hãy thêm `using` đầy đủ để tránh xung đột namespace.

### Liên kết nội bộ
- [[Razor Pages]]
- [[Model–View–Controller]]
- [[Entity Framework Core]]
- [[Thực hiện CRUD trong Razor Pages]]
- [[Cấu hình Entity Framework Core trong ASP.NET Core]]