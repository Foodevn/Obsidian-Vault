## Bài học: Sử dụng Data Annotation và Cấu hình Entity Framework Core

### Khái niệm về Data Annotation
- **Data Annotation** (Chú thích dữ liệu): Là các thuộc tính (attributes) được sử dụng để cung cấp thông tin bổ sung cho Entity Framework Core về cách ánh xạ model thành bảng trong cơ sở dữ liệu.
- Được sử dụng để xác định các ràng buộc, ví dụ: chỉ định khóa chính (primary key) hoặc yêu cầu một cột không được để trống (not null).

### Chỉ định khóa chính (Primary Key)
- Để xác định một thuộc tính là **khóa chính** (primary key) trong bảng:
  - Sử dụng chú thích `[Key]` từ không gian tên `System.ComponentModel.DataAnnotations`.
  - Ví dụ:
    ```csharp
    using System.ComponentModel.DataAnnotations;

    public class Category
    {
        [Key]
        public int Id { get; set; }
        public string Name { get; set; }
        public int DisplayOrder { get; set; }
    }
    ```
  - Khi thêm `[Key]`, Entity Framework Core hiểu rằng thuộc tính `Id` là khóa chính của bảng `Category`.

- **Trường hợp mặc định**:
  - Nếu thuộc tính có tên là `Id` hoặc `<Tên_Model>Id` (ví dụ: `CategoryId`), Entity Framework Core sẽ tự động coi đó là khóa chính mà không cần `[Key]`.
  - Tuy nhiên, sử dụng `[Key]` rõ ràng giúp mã dễ đọc và tránh nhầm lẫn, đặc biệt khi tên thuộc tính không tuân theo quy ước (ví dụ: `Category_Id`).

### Chú thích Required
- Chú thích `[Required]` được sử dụng để đảm bảo một thuộc tính không được để trống (not null) trong cơ sở dữ liệu.
- Ví dụ:
  ```csharp
  [Required]
  public string Name { get; set; }
  ```
- Khi áp dụng `[Required]` cho `Name`, Entity Framework Core sẽ tạo cột `Name` với ràng buộc `NOT NULL` trong SQL.

### Các Data Annotation khác
- Có nhiều chú thích khác (như `[MaxLength]`, `[Range]`, v.v.) sẽ được giới thiệu dần trong khóa học.

### Chuẩn bị tạo bảng trong cơ sở dữ liệu
- Để Entity Framework Core tạo bảng dựa trên model:
  1. Cần định nghĩa **chuỗi kết nối** (connection string) đến SQL Server trong dự án.
  2. Cấu hình ứng dụng để sử dụng **Entity Framework Core** và **SQL Server**.
- Quá trình cấu hình này sẽ được giải thích chi tiết trong các bài học tiếp theo.

### Ví dụ mã hoàn chỉnh
```csharp
using System.ComponentModel.DataAnnotations;

public class Category
{
    [Key]
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    public int DisplayOrder { get; set; }
}
```

### Ghi chú thêm
- Nếu tên thuộc tính là `Id` hoặc `<Tên_Model>Id`, bạn có thể bỏ qua `[Key]`, nhưng việc sử dụng nó giúp mã rõ ràng hơn.
- Hãy kiên nhẫn vì cấu hình Entity Framework Core và SQL Server có thể phức tạp, nhưng sẽ được hướng dẫn chi tiết.

### Liên kết nội bộ
- [[Data Annotation]]
- [[Khóa chính (Primary Key)]]
- [[Entity Framework Core]]
- [[Chuỗi kết nối (Connection String)]]