## Xác Thực Phía Client trong ASP.NET Core

### Giới thiệu
- Xác thực phía server (server-side validation): Khi nhấn nút "Create", yêu cầu được gửi đến server, controller xử lý và trả về thông báo lỗi, gây reload trang.
- Xác thực phía client (client-side validation): Thực hiện kiểm tra trực tiếp trên trình duyệt, không cần gửi yêu cầu đến server, giảm thời gian chờ và không reload trang.
- ASP.NET Core hỗ trợ tích hợp xác thực phía client thông qua jQuery Validation.
- Liên kết: [[Server-Side Validation]], [[Client-Side Validation]], [[jQuery Validation]].

### Cách Triển Khai Xác Thực Phía Client
- **Tích hợp Validation Scripts**:
  - Sử dụng partial view `_ValidationScriptsPartial` (chứa các script jQuery Validation) trong view chính (`Create.cshtml`).
  - Thêm vào section `scripts` của view bằng cú pháp Razor:
    ```csharp
    @section scripts {
        <partial name="_ValidationScriptsPartial" />
    }
    ```
  - Lưu ý: Tên partial view phải khớp chính xác với tên file `_ValidationScriptsPartial.cshtml` trong thư mục `Shared`.
- **Cơ Chế Hoạt Động**:
  - Partial view `_ValidationScriptsPartial` chứa các script cần thiết để kích hoạt xác thực phía client.
  - Script tự động tìm kiếm các thuộc tính xác thực (data attributes) trong form (như `required`, `range`) và thực hiện kiểm tra ngay trên trình duyệt.
  - Nếu partial view không liên quan đến script, có thể thêm trực tiếp vào nội dung view chính (không cần section `scripts`).

### Kết Quả và Hành Vi
- **Xác thực phía client**:
  - Khi nhấn "Create" mà không nhập dữ liệu, lỗi hiển thị ngay lập tức (không reload trang, không xuất hiện spinner).
  - Ví dụ: Nếu để trống `Category Name` hoặc nhập `Display Order` ngoài khoảng hợp lệ (ví dụ: >100), lỗi hiển thị tức thời.
  - Không kích hoạt breakpoint trong controller, vì không gửi yêu cầu đến server.
- **Xác thực phía server (vẫn cần cho custom validation)**:
  - Các lỗi tùy chỉnh (custom validation) như "Category Name và Display Order không được trùng" chỉ được xử lý trên server.
  - Khi nhấn "Create" với dữ liệu vi phạm custom validation, yêu cầu được gửi đến server, kích hoạt breakpoint và trả về lỗi.

### Ghi Chú Thêm
- **Ưu điểm**:
  - Xác thực phía client cải thiện trải nghiệm người dùng bằng cách hiển thị lỗi tức thời, giảm tải server.
  - ASP.NET Core cung cấp sẵn jQuery Validation, chỉ cần thêm partial view để kích hoạt.
- **Hạn chế**:
  - Xác thực phía client không xử lý được các lỗi tùy chỉnh phức tạp (ví dụ: so sánh `Category Name` và `Display Order`), cần kết hợp server-side validation.
- **Mẹo triển khai**:
  - Đảm bảo tên partial view khớp chính xác để tránh lỗi.
  - Thư mục `Shared` là nơi mặc định tìm partial view, không cần chỉ định đường dẫn.
- Liên kết liên quan: [[Partial View]], [[ASP.NET Core Validation]], [[CategoryController]].

### Ví dụ Minh Họa
- **Tình huống**: Form tạo danh mục (Category) với các field `Category Name` (bắt buộc) và `Display Order` (phạm vi hợp lệ).
- **Hành vi**:
  - Để trống `Category Name` → Lỗi hiển thị ngay trên trình duyệt.
  - Nhập `Display Order` > 100 → Lỗi hiển thị khi nhập (real-time).
  - Nhập `Category Name` = "test" và `Display Order` trùng giá trị → Yêu cầu gửi đến server, hiển thị lỗi tùy chỉnh.
- **Mã nguồn**:
  ```csharp
  @section scripts {
      <partial name="_ValidationScriptsPartial" />
  }
  ```

### Hướng Dẫn Thao Tác
1. Mở file `Create.cshtml` trong view `Category`.
2. Thêm section `scripts` và gọi partial view `_ValidationScriptsPartial`.
3. Kiểm tra form có các data attributes xác thực (từ model annotations như `[Required]`, `[Range]`).
4. Chạy ứng dụng, kiểm tra hành vi xác thực phía client (không reload) và phía server (cho custom validation).