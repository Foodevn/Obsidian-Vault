## Sử dụng Tag Helpers để Tăng Tính Động cho Biểu Mẫu Tạo Danh Mục

### Mục tiêu
- Sử dụng **Tag Helpers** trong ASP.NET Core để liên kết động các trường nhập liệu (input fields) với mô hình (model).
- Tự động hóa việc hiển thị nhãn (label) và xác định kiểu dữ liệu dựa trên thuộc tính của mô hình.
- Tùy chỉnh giao diện người dùng bằng cách sử dụng **Data Annotations** để điều chỉnh tên hiển thị của các thuộc tính.

### Khái niệm cơ bản
- **Tag Helpers**: Công cụ trong ASP.NET Core giúp đơn giản hóa việc liên kết dữ liệu giữa giao diện (view) và mô hình (model), thay thế cho cách sử dụng thuộc tính `name` thủ công trong các phiên bản .NET cũ.
- **Data Annotations**: Các thuộc tính (attributes) được áp dụng cho mô hình để tùy chỉnh giao diện người dùng hoặc xác thực dữ liệu phía máy khách (client-side validation).
- **Liên kết mô hình (Model Binding)**: Tự động ánh xạ dữ liệu từ biểu mẫu (form) gửi qua phương thức POST đến các thuộc tính của mô hình.

### Các bước thực hiện

#### 1. Sử dụng Tag Helpers trong Biểu Mẫu
- Trong giao diện `Create.cshtml`, sử dụng **Tag Helpers** để liên kết các trường nhập liệu và nhãn với mô hình `Category`.
- Thay vì khai báo thủ công `type` và nội dung nhãn, sử dụng thuộc tính `asp-for` để chỉ định thuộc tính của mô hình:
  ```html
  @model Category
  <form method="post">
      <div class="border p-3 mt-4">
          <div class="row pb-2">
              <h2 class="text-primary">Tạo danh mục</h2>
              <hr />
          </div>
          <div class="mb-3">
              <label asp-for="Name"></label>
              <input asp-for="Name" class="form-control" />
          </div>
          <div class="mb-3">
              <label asp-for="DisplayOrder"></label>
              <input asp-for="DisplayOrder" class="form-control" />
          </div>
          <div class="row">
              <div class="col-6 col-md-3">
                  <button type="submit" class="btn btn-primary form-control">Tạo</button>
              </div>
              <div class="col-6 col-md-3">
                  <a asp-controller="Category" asp-action="Index" class="btn btn-outline-secondary form-control">Quay lại danh sách</a>
              </div>
          </div>
      </div>
  </form>
  ```
- **Giải thích**:
  - `asp-for="Name"`: Liên kết trường nhập liệu hoặc nhãn với thuộc tính `Name` của mô hình `Category`.
  - `asp-for="DisplayOrder"`: Liên kết với thuộc tính `DisplayOrder`.
  - **Tag Helpers** tự động xác định kiểu dữ liệu (type) của trường nhập liệu dựa trên thuộc tính của mô hình (ví dụ: `DisplayOrder` là số nguyên nên được xử lý như `type="number"`).
  - Nhãn (`label`) tự động hiển thị tên thuộc tính, và khi nhấp vào nhãn, trường nhập liệu tương ứng sẽ được chọn (tính năng hỗ trợ bởi Tag Helpers).

#### 2. Tùy chỉnh tên hiển thị bằng Data Annotations
- Để thêm khoảng trắng hoặc tên thân thiện hơn cho các nhãn, sử dụng **Data Annotations** trong mô hình `Category`.
- Ví dụ, chỉnh sửa file mô hình `Category.cs`:
  ```csharp
  using System.ComponentModel.DataAnnotations;

  public class Category
  {
      public int Id { get; set; }

      [Display(Name = "Tên danh mục")]
      public string Name { get; set; }

      [Display(Name = "Thứ tự hiển thị")]
      public int DisplayOrder { get; set; }
  }
  ```
- **Giải thích**:
  - Thuộc tính `[Display(Name = "...")]` chỉ định tên hiển thị cho các thuộc tính khi được render trên giao diện.
  - Ví dụ: `Name` sẽ hiển thị là "Tên danh mục" thay vì "Name", và `DisplayOrder` sẽ hiển thị là "Thứ tự hiển thị" thay vì "DisplayOrder".
  - Data Annotations còn hỗ trợ các tính năng khác như xác thực phía máy khách (client-side validation), ví dụ: `[[Xác thực biểu mẫu]]`.

#### 3. Lợi ích của Tag Helpers
- **Tự động hóa**: Không cần chỉ định thủ công `type` (kiểu dữ liệu) hoặc nội dung nhãn.
- **Tính liên kết**: Nhấp vào nhãn sẽ tự động chọn trường nhập liệu tương ứng.
- **Bảo trì dễ dàng**: Nếu mô hình thay đổi (ví dụ: thêm thuộc tính mới), Tag Helpers tự động cập nhật giao diện mà không cần sửa đổi thủ công.

#### 4. Kiểm tra và sửa lỗi giao diện
- Sau khi áp dụng Tag Helpers và Data Annotations, chạy lại ứng dụng để kiểm tra giao diện:
  - Đảm bảo nhãn hiển thị đúng (ví dụ: "Tên danh mục" và "Thứ tự hiển thị").
  - Kiểm tra tính đáp ứng và hành vi của biểu mẫu.
- **Lưu ý**: Một số thay đổi trong mô hình hoặc giao diện có thể yêu cầu khởi động lại ứng dụng để áp dụng.

### Ghi chú thêm
- **Xử lý lỗi**: Nếu tên thuộc tính trong `asp-for` không tồn tại trong mô hình (ví dụ: `Name1` thay vì `Name`), hệ thống sẽ báo lỗi biên dịch, đảm bảo tính chính xác.
- **Khởi động lại ứng dụng**: Cần khởi động lại khi thay đổi mô hình hoặc bộ điều khiển để áp dụng các thay đổi.
- **Liên kết chéo**: Xem thêm `[[Tag Helpers trong ASP.NET Core]]` hoặc `[[Data Annotations]]` để tìm hiểu chi tiết về các tính năng mở rộng.

### Ví dụ
- Khi truy cập `/Category/Create`, biểu mẫu hiển thị hai trường nhập liệu với nhãn "Tên danh mục" và "Thứ tự hiển thị". Nhấp vào nhãn sẽ tự động chọn trường nhập liệu tương ứng, và kiểu dữ liệu được tự động xác định (ví dụ: `DisplayOrder` là số nguyên).

> **Lưu ý**: Tiếp tục phát triển để xử lý dữ liệu gửi từ biểu mẫu (POST) và lưu vào cơ sở dữ liệu. Xem thêm `[[Xử lý biểu mẫu POST]]` hoặc `[[Lưu dữ liệu danh mục]]`.


