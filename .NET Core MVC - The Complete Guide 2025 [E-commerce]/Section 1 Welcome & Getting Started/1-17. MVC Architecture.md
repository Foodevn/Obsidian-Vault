## Kiến trúc MVC trong .NET Core

### Mục tiêu
- Hiểu cấu trúc và vai trò của **MVC (Model-View-Controller)** trong ứng dụng .NET Core.
- Nắm cách các thành phần **Model**, **View**, và **Controller** phối hợp trong ứng dụng.
- Tìm hiểu khái niệm cơ bản về **định tuyến (routing)** và **action methods** trong controller.

### Tổng quan về MVC
- **MVC** là viết tắt của **Model-View-Controller**, một mô hình kiến trúc phổ biến trong phát triển ứng dụng web.
- Các thành phần chính:
  - **Model**: Đại diện cho dữ liệu và cấu trúc dữ liệu.
  - **View**: Đại diện cho giao diện người dùng (UI).
  - **Controller**: Xử lý yêu cầu người dùng, làm trung gian giữa Model và View.

### Chi tiết các thành phần MVC

#### 1. Model
- **Định nghĩa**: Đại diện cho **hình dạng của dữ liệu (shape of the data)**.
- **Vai trò**:
  - Chứa các lớp (class) định nghĩa cấu trúc dữ liệu.
  - Ví dụ: Trong ứng dụng thương mại điện tử, Model có thể bao gồm các lớp:
    - `Product` (Sản phẩm)
    - `Order` (Đơn hàng)
    - `OrderDetail` (Chi tiết đơn hàng)
    - `ShoppingCart` (Giỏ hàng)
- **Chức năng**: Lưu trữ và quản lý dữ liệu, thường liên kết với cơ sở dữ liệu.

#### 2. View
- **Định nghĩa**: Đại diện cho **giao diện người dùng (user interface)**.
- **vai trò**:
  - Hiển thị dữ liệu cho người dùng dưới dạng HTML.
  - Bao gồm các yếu tố giao diện như:
    - Biểu mẫu (form)
    - Biểu đồ (chart)
    - Bảng dữ liệu (table)
- **Chức năng**: Tạo giao diện người dùng dựa trên dữ liệu được cung cấp từ Controller.

#### 3. Controller
- **Định nghĩa**: **Trái tim của ứng dụng MVC**, xử lý yêu cầu người dùng và kết nối Model với View.
- **Vai trò**:
  - Nh Receiving yêu cầu từ người dùng (ví dụ: nhấp nút, mở trang web).
  - Tương tác với Model để lấy hoặc xử lý dữ liệu.
  - Chuyển dữ liệu đã xử lý sang View để hiển thị.
  - Trả về kết quả cuối cùng (HTML) cho trình duyệt người dùng.
- **Quy trình hoạt động**:
  1. Người dùng gửi yêu cầu (request) đến Controller.
  2. Controller lấy dữ liệu từ Model (ví dụ: từ cơ sở dữ liệu).
  3. Controller xử lý dữ liệu (nếu cần) và chuyển dữ liệu sang View.
  4. View định dạng dữ liệu trong HTML (ví dụ: hiển thị dữ liệu trong bảng).
  5. Controller gửi nội dung HTML cuối cùng về trình duyệt để hiển thị.

### Định tuyến (Routing) trong MVC
- **Vị trí**: Được cấu hình trong tệp `Program.cs`.
- **Mẫu định tuyến mặc định**:
  - `{controller=Home}/{action=Index}/{id?}`
  - **Giải thích**:
    - `controller=Home`: Mặc định gọi `HomeController` nếu không chỉ định controller.
    - `action=Index`: Mặc định gọi phương thức `Index` trong controller.
    - `id?`: Tham số `id` là tùy chọn (có thể null).
- **Action Methods**:
  - Là các phương thức trong Controller, định nghĩa các điểm cuối (endpoints) để xử lý yêu cầu.
  - Ví dụ: Phương thức `Index` trong `HomeController` xử lý yêu cầu đến trang chủ.

### Quy trình hoạt động của MVC
1. Người dùng mở trang web hoặc nhấp vào nút, gửi yêu cầu đến **Controller**.
2. **Controller** xác định Model nào cần truy xuất và lấy dữ liệu.
3. **Controller** xử lý dữ liệu (nếu cần) và chuyển sang **View**.
4. **View** định dạng dữ liệu trong HTML (ví dụ: hiển thị trong bảng hoặc biểu mẫu).
5. **Controller** trả về nội dung HTML cho trình duyệt để hiển thị.

### Ghi chú thêm
- **Controller** là trung tâm điều phối, kết nối **Model** và **View**.
- Các khái niệm như **action methods** và **routing** sẽ được giải thích chi tiết trong các bài học tiếp theo.
- Nếu MVC còn khó hiểu, không cần lo lắng. Các bài học sau sẽ làm rõ hơn thông qua ví dụ thực tế.

### Liên kết nội bộ
- [[MVC Architecture]]
- [[Program.cs]]
- [[Controller]]
- [[Model]]
- [[View]]
- [[Routing]]
- [[Action Methods]]

---

**Ghi chú**: Nội dung này được diễn giải từ transcript để phục vụ ôn tập. Các khái niệm như định tuyến chi tiết và action methods sẽ được giải thích kỹ hơn trong các bài học tiếp theo.