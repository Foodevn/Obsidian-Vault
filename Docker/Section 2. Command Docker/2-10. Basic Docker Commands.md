# Các lệnh cơ bản của Docker

## Tổng quan
- **Mục tiêu**: Giới thiệu và giải thích các lệnh cơ bản của Docker để quản lý container và hình ảnh (image).
- **Nội dung**: Hướng dẫn sử dụng các lệnh như `docker run`, `docker ps`, `docker stop`, `docker rm`, `docker images`, `docker rmi`, `docker pull`, `docker exec`, `docker attach`, và các chế độ chạy container (foreground, detached).
- **Liên kết tham khảo**: [[Docker Hub]], [[Docker CLI]], [[Phòng thí nghiệm khóa học]].

## Các lệnh Docker cơ bản

### 1. Lệnh `docker run`
- **Chức năng**: Chạy một container từ một hình ảnh (image).
- **Ví dụ**:
  ```bash
  docker run nginx
  ```
  - Chạy một phiên bản của ứng dụng Nginx trên máy chủ Docker (Docker host).
  - Nếu hình ảnh không có trên máy chủ, Docker sẽ tự động tải từ [[Docker Hub]] (chỉ thực hiện lần đầu).
  - Các lần chạy sau sẽ sử dụng hình ảnh đã tải.
- **Đặc điểm**:
  - Container chỉ tồn tại khi tiến trình (process) bên trong nó còn hoạt động.
  - Ví dụ: Chạy `docker run ubuntu` sẽ khởi động container từ hình ảnh Ubuntu, nhưng container sẽ dừng ngay lập tức vì không có tiến trình mặc định chạy trong hình ảnh Ubuntu.
- **Chạy container với lệnh cụ thể**:
  ```bash
  docker run ubuntu sleep 5
  ```
  - Container chạy lệnh `sleep 5`, ngủ trong 5 giây, sau đó dừng khi lệnh kết thúc.

### 2. Lệnh `docker ps`
- **Chức năng**: Liệt kê các container đang chạy và thông tin cơ bản (ID container, tên hình ảnh, trạng thái, tên container).
- **Ví dụ**:
  ```bash
  docker ps
  ```
  - Hiển thị container đang chạy, ví dụ: container có tên ngẫu nhiên `silly_sammet`.
- **Tùy chọn `-a`**:
  ```bash
  docker ps -a
  ```
  - Hiển thị tất cả container (bao gồm cả container đã dừng hoặc thoát).

### 3. Lệnh `docker stop`
- **Chức năng**: Dừng một container đang chạy.
- **Yêu cầu**: Cần cung cấp ID hoặc tên container (kiểm tra bằng `docker ps`).
- **Ví dụ**:
  ```bash
  docker stop silly_sammet
  ```
  - Dừng container có tên `silly_sammet`.
  - Kết quả: Tên container được in ra, và `docker ps` sẽ không hiển thị container đang chạy nữa.
  - Kiểm tra container đã dừng bằng `docker ps -a` (trạng thái: `exited`).

### 4. Lệnh `docker rm`
- **Chức năng**: Xóa vĩnh viễn một container đã dừng hoặc thoát.
- **Ví dụ**:
  ```bash
  docker rm silly_sammet
  ```
  - Xóa container có tên `silly_sammet`.
  - Kết quả: Tên container được in ra, và `docker ps -a` xác nhận container đã bị xóa.

### 5. Lệnh `docker images`
- **Chức năng**: Liệt kê các hình ảnh (images) có sẵn trên máy chủ và kích thước của chúng.
- **Ví dụ**:
  ```bash
  docker images
  ```
  - Hiển thị danh sách hình ảnh: `nginx`, `redis`, `ubuntu`, `alpine`.

### 6. Lệnh `docker rmi`
- **Chức năng**: Xóa một hình ảnh không còn sử dụng.
- **Yêu cầu**: Đảm bảo không có container nào đang chạy dựa trên hình ảnh đó (phải dừng và xóa các container phụ thuộc trước).
- **Ví dụ**:
  ```bash
  docker rmi nginx
  ```
  - Xóa hình ảnh `nginx`.

### 7. Lệnh `docker pull`
- **Chức năng**: Tải hình ảnh từ [[Docker Hub]] mà không chạy container.
- **Ví dụ**:
  ```bash
  docker pull ubuntu
  ```
  - Tải hình ảnh `ubuntu` về máy chủ để sử dụng sau này, tránh chờ tải khi chạy `docker run`.

### 8. Lệnh `docker exec`
- **Chức năng**: Thực thi một lệnh trong một container đang chạy.
- **Ví dụ**:
  ```bash
  docker exec <container_id> cat /etc/hosts
  ```
  - In nội dung file `/etc/hosts` trong container đang chạy (ví dụ: container Ubuntu đang chạy lệnh `sleep 100`).

### 9. Chế độ chạy container
- **Foreground (Chế độ gắn kết)**:
  - Container chạy ở chế độ tiền cảnh, hiển thị đầu ra (stdout) trên terminal.
  - Ví dụ:
    ```bash
    docker run kodekloud/simple-webapp
    ```
    - Chạy ứng dụng web đơn giản, lắng nghe trên cổng 8080.
    - Terminal bị khóa để hiển thị đầu ra của container, không thể nhập lệnh khác.
    - Dừng container bằng tổ hợp phím `Ctrl + C`.
- **Detached (Chế độ nền)**:
  - Container chạy ở chế độ nền, trả về terminal ngay lập tức.
  - Ví dụ:
    ```bash
    docker run -d kodekloud/simple-webapp
    ```
    - Chạy container ở chế độ nền, kiểm tra trạng thái bằng `docker ps`.
  - **Gắn lại container**:
    ```bash
    docker attach <container_id>
    ```
    - Gắn lại vào container đang chạy ở chế độ nền (sử dụng ID hoặc tên container).
    - Lưu ý: Chỉ cần cung cấp vài ký tự đầu của ID container (đủ để phân biệt với các container khác).

## Đặc điểm của container
- **Khác biệt với máy ảo (VM)**:
  - Container không được thiết kế để chạy toàn bộ hệ điều hành như máy ảo.
  - Container chạy một tiến trình hoặc tác vụ cụ thể (ví dụ: máy chủ web, cơ sở dữ liệu, phân tích dữ liệu).
  - Container dừng khi tiến trình bên trong kết thúc hoặc gặp lỗi.
- **Hình ảnh Ubuntu**:
  - Là hình ảnh cơ bản (base image) cho các ứng dụng khác, không chạy dịch vụ mặc định.
  - Container từ hình ảnh Ubuntu dừng ngay nếu không có tiến trình cụ thể được chỉ định.

## Ghi chú thêm
- **Thực hành**:
  - Các lệnh trên sẽ được thực hành trong bài kiểm tra thực hành (hands-on quiz) của khóa học.
  - Khóa học cung cấp môi trường phòng thí nghiệm (labs) để thực hành các lệnh Docker.
- **Liên kết nội bộ**:
  - [[Docker Hub]]: Kho lưu trữ hình ảnh Docker.
  - [[Docker CLI]]: Tài liệu về các lệnh dòng lệnh của Docker.
  - [[Phòng thí nghiệm khóa học]]: Môi trường thực hành được cung cấp trong khóa học.
