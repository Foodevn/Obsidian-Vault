## Xóa Danh Mục (Delete Category)

### Mục tiêu
- Tạo chức năng xóa danh mục trong ứng dụng.
- Hiển thị thông tin danh mục tương tự như khi chỉnh sửa (edit), nhưng tất cả các trường sẽ bị vô hiệu hóa (disabled).
- Đảm bảo xóa danh mục từ cơ sở dữ liệu một cách an toàn và quay lại trang chính (index) sau khi hoàn tất.

### Quy trình thực hiện
#### 1. Tạo Action Method GET cho Xóa Danh Mục
- **Mục đích**: Lấy thông tin danh mục để hiển thị trước khi xóa.
- **Thực hiện**:
  - Sao chép mã từ action method `Edit` (chỉnh sửa danh mục) và đổi tên thành `Delete`.
  - Lấy đối tượng danh mục (category object) hoặc chỉ lấy ID của danh mục mà người dùng muốn xóa.
  - Đảm bảo action method `GET` có tên khác với `POST` để tránh xung đột tham số.
  - Sử dụng thuộc tính `[HttpGet]` để xác định đây là phương thức GET.

#### 2. Tạo Action Method POST cho Xóa Danh Mục
- **Mục đích**: Xử lý yêu cầu xóa danh mục từ cơ sở dữ liệu.
- **Thực hiện**:
  - Đổi tên action method thành `DeletePost` để phân biệt với action `GET`.
  - Chỉ định rõ tên endpoint là `Delete` bằng cách sử dụng thuộc tính `[ActionName("Delete")]` để khớp với form gửi dữ liệu bằng phương thức POST.
  - Các bước xử lý:
    - Tìm danh mục trong cơ sở dữ liệu bằng ID: `categoryObj = _db.Categories.Find(id)`.
    - Kiểm tra nếu `categoryObj` là `null`, trả về lỗi `NotFound`.
    - Nếu danh mục tồn tại, sử dụng phương thức `_db.Categories.Remove(categoryObj)` để xóa.
    - Lưu thay đổi vào cơ sở dữ liệu bằng `_db.SaveChanges()`.
    - Chuyển hướng về action `Index` sau khi xóa thành công.

### Mã nguồn
#### Action Method GET
```csharp
[HttpGet]
public IActionResult Delete(int id)
{
    var categoryObj = _db.Categories.Find(id);
    if (categoryObj == null)
    {
        return NotFound();
    }
    return View(categoryObj);
}
```

#### Action Method POST
```csharp
[HttpPost]
[ActionName("Delete")]
public IActionResult DeletePost(int id)
{
    var categoryObj = _db.Categories.Find(id);
    if (categoryObj == null)
    {
        return NotFound();
    }
    _db.Categories.Remove(categoryObj);
    _db.SaveChanges();
    return RedirectToAction("Index");
}
```

### Ghi chú thêm
- **Vô hiệu hóa trường nhập liệu**: Khi hiển thị form xóa, tất cả các trường (fields) cần được đặt thuộc tính `disabled` để người dùng không thể chỉnh sửa thông tin danh mục trước khi xóa.
- **Liên kết nội bộ**: Xem thêm về [[Chỉnh sửa danh mục]] để so sánh cách hiển thị form và xử lý dữ liệu.
- **Kiểm tra lỗi**: Đảm bảo kiểm tra trường hợp danh mục không tồn tại để tránh lỗi khi truy vấn cơ sở dữ liệu.

### Liên kết liên quan
- [[Quản lý danh mục]]
- [[Cơ sở dữ liệu (Database)]]
- [[Action Method trong ASP.NET]]