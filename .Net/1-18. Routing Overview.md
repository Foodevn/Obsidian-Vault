## Định tuyến (Routing) trong ứng dụng MVC

### Mục tiêu
- Hiểu khái niệm **định tuyến (routing)** trong ứng dụng MVC của .NET Core.
- Nắm cách phân tích URL để xác định **controller**, **action**, và **ID** theo mẫu định tuyến.
- Hiểu cấu hình định tuyến mặc định trong tệp `Program.cs`.

### Tổng quan về định tuyến
- **Định tuyến (Routing)**: Xác định cách một URL được ánh xạ đến **controller** và **action** trong ứng dụng MVC.
- **Mẫu URL**:
  - URL bao gồm: `domain name` (ví dụ: `localhost`, `google.com`) + **mẫu định tuyến (routing pattern)**.
  - Mẫu định tuyến bắt đầu sau tên miền (domain) và cổng (port).

### Mẫu định tuyến mặc định trong MVC
- **Cú pháp**: `{controller}/{action}/{id?}`
  - **controller**: Tên của controller (ví dụ: `Home`, `Category`, `Product`).
  - **action**: Tên của phương thức hành động (action method) trong controller (ví dụ: `Index`, `Edit`, `Details`).
  - **id?**: Tham số tùy chọn (có thể null, biểu thị bằng dấu `?`).
- **Nguyên tắc**:
  - Phần đầu tiên sau tên miền là tên **controller**.
  - Phần tiếp theo (sau dấu `/`) là tên **action**.
  - Phần còn lại (nếu có) là **ID**.

### Ví dụ phân tích URL
1. **URL**: `localhost:port/category/index/3`
   - **Controller**: `Category`
   - **Action**: `Index`
   - **ID**: `3`
2. **URL**: `localhost:port/category`
   - **Controller**: `Category`
   - **Action**: `Index` (mặc định, nếu không chỉ định action)
   - **ID**: `null`
3. **URL**: `localhost:port/category/edit/3`
   - **Controller**: `Category`
   - **Action**: `Edit`
   - **ID**: `3`
4. **URL**: `localhost:port/product/details/3`
   - **Controller**: `Product`
   - **Action**: `Details`
   - **ID**: `3`

### Cấu hình định tuyến mặc định
- **Vị trí**: Tệp `Program.cs`, sử dụng `app.MapControllerRoute()`.
- **Mẫu mặc định**:
  ```csharp
  app.MapControllerRoute(
      name: "default",
      pattern: "{controller=Home}/{action=Index}/{id?}"
  );
```
- **Giải thích**:
    - Nếu không chỉ định gì sau tên miền, ứng dụng mặc định gọi HomeController và phương thức Index.
    - id?: Tham số id là tùy chọn.
- **Ý nghĩa**:
    - Khi người dùng truy cập URL như localhost:port, ứng dụng tự động điều hướng đến HomeController và hành động Index.

### Ghi chú quan trọng

- **Controller** và **Action** là hai khái niệm cốt lõi trong định tuyến MVC.
- Mẫu định tuyến có thể được tùy chỉnh trong Program.cs, nhưng mẫu mặc định {controller=Home}/{action=Index}/{id?} được sử dụng phổ biến.
- Việc hiểu cách phân tích URL giúp xác định controller, action, và tham số, hỗ trợ phát triển và gỡ lỗi ứng dụng.

### Liên kết nội bộ

- [[Routing]]
- [[Program.cs]]
- [[Controller]]
- [[Action Methods]]
- [[MVC Architecture]]

---

**Ghi chú**: Nội dung này được diễn giải từ transcript để phục vụ ôn tập. Cách định tuyến hoạt động thực tế sẽ được trình bày chi tiết trong các bài học tiếp theo.