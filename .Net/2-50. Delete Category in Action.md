## Xóa Danh Mục - Tạo View và Kiểm Tra Chức Năng

### Mục tiêu
- Tạo view cho chức năng xóa danh mục (Delete Category) dựa trên view của chỉnh sửa (Edit).
- Đảm bảo các trường trong form bị vô hiệu hóa (disabled) để người dùng không thể chỉnh sửa.
- Cập nhật giao diện và logic để hỗ trợ xóa danh mục một cách an toàn.
- Kiểm tra toàn bộ quy trình CRUD (Create, Read, Update, Delete) cho danh mục.

### Quy trình thực hiện
#### 1. Tạo View cho Xóa Danh Mục
- **Thực hiện**:
  - Tạo view mới bằng cách nhấp chuột phải vào action `Delete` trong controller, chọn "Add View" và tạo một empty view với tên `Delete.cshtml`.
  - Sao chép nội dung từ view `Edit.cshtml` và dán vào `Delete.cshtml`.
  - Điều chỉnh view `Delete.cshtml`:
    - Xóa các đoạn mã liên quan đến validation (kiểm tra dữ liệu) vì không cần thiết khi xóa.
    - Thêm thuộc tính `disabled` cho tất cả các trường nhập liệu để người dùng không thể chỉnh sửa.
    - Đổi tiêu đề form thành "Xóa Danh Mục" (Delete Category).
    - Đổi nút submit thành nút "Xóa Bản Ghi" (Delete Record) và sử dụng màu `danger` (thường là màu đỏ) để biểu thị hành động xóa.
- **Lưu ý**:
  - Thêm trường ẩn (hidden field) chứa `ID` của danh mục để đảm bảo gửi đúng ID khi submit form, mặc dù ID không bắt buộc trong trường hợp này.
  - Tương tự, có thể áp dụng trường ẩn cho view `Edit.cshtml` để giữ tính nhất quán và rõ ràng.

#### 2. Cập nhật Gọi Action Xóa trong View Index
- **Thực hiện**:
  - Trong view `Index.cshtml`, cập nhật liên kết gọi action `Delete` để truyền tham số `id` của danh mục.
  - Đảm bảo rằng `id` được truyền vào route để controller biết danh mục nào cần xóa.
- **Ví dụ mã trong Index.cshtml**:
  ```html
  <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger">Xóa</a>
  ```

#### 3. Kiểm tra chức năng xóa
- **Thực hiện**:
  - Chạy ứng dụng và kiểm tra chức năng xóa danh mục:
    - Truy cập danh sách danh mục, chọn một danh mục (ví dụ: "Test") để xóa.
    - Kiểm tra giao diện view `Delete.cshtml`: tất cả các trường phải bị vô hiệu hóa (disabled).
    - Nhấn nút "Xóa" và xác nhận danh mục đã được xóa khỏi cơ sở dữ liệu.
  - Kiểm tra cơ sở dữ liệu (SQL Server):
    - Xác nhận danh mục đã xóa (ví dụ: danh mục "Test") không còn tồn tại trong bảng `Categories`.

### Mã nguồn
#### View Delete.cshtml
```html
@model Category

<h2>Xóa Danh Mục</h2>

<form asp-action="Delete" method="post">
    <input type="hidden" asp-for="Id" />
    <div class="form-group">
        <label asp-for="Name"></label>
        <input asp-for="Name" class="form-control" disabled />
    </div>
    <div class="form-group">
        <label asp-for="DisplayOrder"></label>
        <input asp-for="DisplayOrder" class="form-control" disabled />
    </div>
    <button type="submit" class="btn btn-danger">Xóa Bản Ghi</button>
</form>
```

#### View Index.cshtml (Phần liên kết xóa)
```html
@foreach (var item in Model)
{
    <tr>
        <td>@item.Name</td>
        <td>@item.DisplayOrder</td>
        <td>
            <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger">Xóa</a>
        </td>
    </tr>
}
```

### Ghi chú thêm
- **Trường ẩn (Hidden Field)**: Việc thêm trường ẩn cho `ID` giúp tăng tính rõ ràng và minh bạch trong việc truyền dữ liệu, dù không bắt buộc trong trường hợp này.
- **Kiểm tra CRUD**: Sau khi hoàn thành chức năng xóa, toàn bộ các thao tác CRUD (Tạo, Đọc, Cập nhật, Xóa) cho danh mục đã hoạt động đúng.
- **Kiểm tra cơ sở dữ liệu**: Luôn kiểm tra bảng `Categories` trong SQL Server để đảm bảo dữ liệu được cập nhật chính xác sau khi xóa.

### Liên kết liên quan
- [[Chỉnh sửa danh mục]]
- [[Quản lý danh mục]]
- [[Cơ sở dữ liệu (Database)]]
- [[Action Method trong ASP.NET]]