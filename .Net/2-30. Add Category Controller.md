## Bài học: Tạo Controller và View để Thực hiện CRUD cho Category

### Khái niệm
- **CRUD**: Viết tắt của Create (Tạo), Read (Đọc), Update (Cập nhật), Delete (Xóa) – các thao tác cơ bản để quản lý dữ liệu trong cơ sở dữ liệu.
- Để thực hiện CRUD cho `Category`, cần tạo:
  - **Controller** (Bộ điều khiển): Xử lý yêu cầu từ người dùng và tương tác với cơ sở dữ liệu.
  - **View** (Giao diện): Hiển thị dữ liệu hoặc giao diện để người dùng tương tác.

### Tạo Category Controller
1. **Tạo Controller**:
   - Trong thư mục `Controllers`, nhấp chuột phải, chọn **Add** > **Controller**.
   - Chọn **MVC Controller - Empty** để tạo controller trống.
   - Đặt tên là `CategoryController` (phải có hậu tố `Controller` để .NET nhận diện đây là bộ điều khiển).
   - Ví dụ mã `CategoryController.cs`:
     ```csharp
     public class CategoryController : Controller
     {
         public IActionResult Index()
         {
             return View();
         }
     }
     ```
   - **Giải thích**:
     - Phương thức `Index`: Là action method mặc định, trả về một view để hiển thị danh sách các category.
     - `IActionResult`: Kiểu trả về cho phép trả về view, JSON, redirect, v.v.

2. **Kiểm tra truy cập Controller**:
   - Khi chạy ứng dụng, truy cập URL: `/Category/Index`.
   - URL này ánh xạ tới `CategoryController` và action `Index`.
   - Nếu đặt điểm ngắt (breakpoint) trong `Index`, ứng dụng sẽ dừng tại đó khi truy cập URL.

3. **Lỗi thường gặp**:
   - Nếu view `Index` không tồn tại, lỗi “The view 'Index' was not found” sẽ xuất hiện.
   - Lý do: ASP.NET MVC tìm kiếm view trong các thư mục:
     - `/Views/Category/Index.cshtml`
     - `/Views/Shared/Index.cshtml`
   - Khắc phục: Tạo view tương ứng trong thư mục đúng.

### Tạo View cho Category
1. **Tạo thư mục View**:
   - Trong thư mục `Views`, tạo thư mục con `Category` (tên phải khớp với tên controller, không bao gồm hậu tố `Controller`).
   - Trong thư mục `Category`, nhấp chuột phải, chọn **Add** > **View**.
   - Chọn **Razor View - Empty**, đặt tên là `Index.cshtml`.

2. **Thêm nội dung View**:
   - Ví dụ nội dung `Index.cshtml`:
     ```html
     <h1>Danh sách Category</h1>
     ```
   - View này sẽ hiển thị tiêu đề “Danh sách Category” khi truy cập `/Category/Index`.

3. **Kiểm tra kết quả**:
   - Chạy ứng dụng, truy cập `/Category/Index`.
   - Nếu cấu hình đúng, trang sẽ hiển thị tiêu đề “Danh sách Category”.

### Quy trình truy cập Controller và View
- URL `/Category/Index`:
  - Gọi `CategoryController`.
  - Thực thi action `Index`.
  - Action trả về view `/Views/Category/Index.cshtml`.
- Nếu view không tồn tại, ASP.NET MVC sẽ tìm trong thư mục `Shared` hoặc báo lỗi.

### Các bước tiếp theo
- Thêm logic vào `CategoryController` để thực hiện các thao tác CRUD:
  - **Create**: Tạo category mới.
  - **Read**: Lấy danh sách hoặc chi tiết category.
  - **Update**: Cập nhật category.
  - **Delete**: Xóa category.
- Tích hợp `ApplicationDbContext` để truy vấn cơ sở dữ liệu.
- Tạo các view khác (ví dụ: `Create.cshtml`, `Edit.cshtml`, `Delete.cshtml`) để hỗ trợ giao diện CRUD.

### Ghi chú thêm
- Tên controller phải có hậu tố `Controller` để được nhận diện.
- Tên thư mục view (`Category`) phải khớp với tên controller (không bao gồm `Controller`).
- View `Index` là điểm bắt đầu để hiển thị danh sách category, sẽ được mở rộng để hiển thị dữ liệu từ cơ sở dữ liệu.

### Liên kết nội bộ
- [[Controller trong MVC]]
- [[View trong MVC]]
- [[CRUD Operations]]
- [[ApplicationDbContext]]
- [[Entity Framework Core]]