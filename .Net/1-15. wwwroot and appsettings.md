## Cấu trúc thư mục wwwroot và tệp Appsettings.json trong .NET Core

### Mục tiêu
- Hiểu vai trò của thư mục `wwwroot` trong việc lưu trữ nội dung tĩnh.
- Nắm cách sử dụng tệp `appsettings.json` để quản lý chuỗi kết nối và khóa bí mật.
- Tìm hiểu cách .NET Core chọn cấu hình dựa trên biến môi trường.

### Thư mục `wwwroot`
- **Vai trò**: Lưu trữ tất cả **nội dung tĩnh (static content)** của ứng dụng .NET Core.
- **Nội dung tĩnh là gì?**:
  - Các tệp **CSS**, **JavaScript**, hình ảnh, PDF, PowerPoint, hoặc các thư viện bên thứ ba (third-party libraries).
  - Các tệp không chứa mã HTML.
- **Cấu trúc thư mục**:
  - `site.css`: Tệp CSS mặc định, được sử dụng để định dạng giao diện ứng dụng.
  - `site.js`: Tệp JavaScript mặc định (hiện tại trống, chỉ chứa mẫu cơ bản).
  - Thư mục `lib`: Chứa các thư viện mặc định khi tạo ứng dụng MVC:
    - **Bootstrap**: Thư viện giao diện.
    - **jQuery**: Thư viện JavaScript.
    - **jQuery Validation**: Thư viện xác thực biểu mẫu.
- **Nguyên tắc**:
  - Tất cả nội dung tĩnh (hình ảnh, tệp, thư viện, v.v.) phải được đặt trong thư mục `wwwroot`.
  - Đây là nơi duy nhất để lưu trữ các tệp tĩnh trong dự án.

### Tệp `appsettings.json`
- **Vai trò**: Lưu trữ **chuỗi kết nối (connection strings)** và **khóa bí mật (secret keys)** của ứng dụng.
- **Ví dụ nội dung**:
  - Chuỗi kết nối cơ sở dữ liệu.
  - Khóa bí mật cho dịch vụ email (ví dụ: SendGrid).
  - Khóa API cho Azure Blob Storage hoặc các dịch vụ khác.
- **Lợi ích**:
  - Tập trung tất cả chuỗi kết nối và khóa bí mật ở một nơi.
  - Dễ dàng thay đổi cấu hình mà không cần tìm kiếm trong mã nguồn.

#### Phân biệt `appsettings.json` và `appsettings.[Environment].json`
- **Cơ chế hoạt động**:
  - Tệp `appsettings.json`: Chứa cấu hình chung cho ứng dụng.
  - Tệp `appsettings.[Environment].json` (ví dụ: `appsettings.Development.json`, `appsettings.Production.json`):
    - Chứa cấu hình riêng cho từng môi trường (development, production, v.v.).
    - .NET Core tự động chọn tệp cấu hình dựa trên biến môi trường `ASPNETCORE_ENVIRONMENT` (được định nghĩa trong `launchSettings.json`).
- **Ví dụ**:
  - Nếu `ASPNETCORE_ENVIRONMENT = Development`, ứng dụng sử dụng `appsettings.Development.json`.
  - Nếu `ASPNETCORE_ENVIRONMENT = Production`, ứng dụng sử dụng `appsettings.Production.json`.
- **Nguyên tắc**:
  - Luôn đặt chuỗi kết nối và khóa bí mật trong các tệp `appsettings.json` hoặc `appsettings.[Environment].json`.
  - Không nhúng trực tiếp các khóa bí mật trong mã nguồn.

#### Thao tác thực tế
- **Thêm tệp `appsettings.Production.json`**:
  - Tạo mới tệp JSON trong dự án (ví dụ: `appsettings.Production.json`).
  - Định nghĩa chuỗi kết nối hoặc khóa bí mật dành riêng cho môi trường sản xuất.
  - .NET Core tự động sử dụng tệp này khi biến môi trường là `Production`.
- **Xóa tệp tạm**:
  - Tệp `appsettings.Production.json` được tạo trong ví dụ đã bị xóa vì chưa cần thiết.
  - Sẽ được sử dụng lại khi triển khai ứng dụng (deploy) trong các bài học sau.

### Ghi chú thêm
- Thư mục `wwwroot` và tệp `appsettings.json` là hai thành phần cốt lõi trong cấu trúc dự án .NET Core.
- Các chủ đề như cấu hình chi tiết của `appsettings.json` hoặc triển khai ứng dụng sẽ được đề cập trong các bài học tiếp theo.
- Tệp `Program.cs` (sẽ được giải thích trong video tiếp theo) là một tệp quan trọng khác cần lưu ý.

### Liên kết nội bộ
- [[wwwroot]]
- [[appsettings.json]]
- [[ASPNETCORE_ENVIRONMENT]]
- [[Chuỗi kết nối]]
- [[Program.cs]]

---

**Ghi chú**: Nội dung này được diễn giải từ transcript để phục vụ ôn tập. Các khái niệm như cách triển khai ứng dụng hoặc cấu hình chi tiết sẽ được giải thích trong các bài học tiếp theo.